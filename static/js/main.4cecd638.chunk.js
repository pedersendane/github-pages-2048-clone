(this["webpackJsonp2048-clone"]=this["webpackJsonp2048-clone"]||[]).push([[0],{23:function(t,e,o){},24:function(t,e,o){},44:function(t,e,o){"use strict";o.r(e);var n=o(2),s=o.n(n),r=o(17),i=o.n(r),a=(o(23),o(24),o(3)),h=o(4),c=o(6),l=o(5),u=o(18),d=o(8),f=o.n(d),m=o(0);function v(t){return Object(m.jsx)(m.Fragment,{children:function(t){var e=t.highScore;return e.length>0?e.map((function(t){return Object(m.jsx)("div",{className:"high-score",children:Object(m.jsxs)("h3",{className:"score",children:["High Score: ",Object(m.jsx)("span",{id:"high-score",children:t.score})]})},t.id)})):Object(m.jsx)("p",{children:" No Highscore Found "})}(t)})}function b(){var t=Object(n.useState)(""),e=Object(u.a)(t,2),o=e[0],s=e[1];Object(n.useEffect)((function(){r()}),[]);var r=function(){f.a.get("http://127.0.0.1:8000/high-score").then((function(t){console.log(t);var e=t.data;s(e)})).catch((function(t){return console.error(t)}))};return Object(m.jsx)(v,{highScore:o})}function p(t){var e={method:"post",url:"http://localhost:8000/new-high-score",params:{score:parseInt(t)}};f()(e).then((function(t){return console.log(t),!0})).catch((function(t){console.log(t)}))}var j=function(t){Object(c.a)(o,t);var e=Object(l.a)(o);function o(t){var n;return Object(a.a)(this,o),(n=e.call(this,t)).state={board:new g},n}return Object(h.a)(o,[{key:"restartGame",value:function(){this.setState({board:new g}),window.location.reload(!1)}},{key:"handleKeyDown",value:function(t){if(!this.state.board.hasWon())if(t.keyCode>=37&&t.keyCode<=40){t.preventDefault();var e=t.keyCode-37;this.setState({board:this.state.board.move(e)})}else switch(!0){case 87===t.keyCode:e=1,this.setState({board:this.state.board.move(e)});break;case 65===t.keyCode:e=0,this.setState({board:this.state.board.move(e)});break;case 83===t.keyCode:e=3,this.setState({board:this.state.board.move(e)});break;case 68===t.keyCode:e=2,this.setState({board:this.state.board.move(e)})}}},{key:"handleTouchStart",value:function(t){this.state.board.hasWon()||1===t.touches.length&&(this.startX=t.touches[0].screenX,this.startY=t.touches[0].screenY,t.preventDefault())}},{key:"handleTouchEnd",value:function(t){if(!this.state.board.hasWon()&&1===t.changedTouches.length){var e=t.changedTouches[0].screenX-this.startX,o=t.changedTouches[0].screenY-this.startY,n=-1;Math.abs(e)>3*Math.abs(o)&&Math.abs(e)>30?n=e>0?2:0:Math.abs(o)>3*Math.abs(e)&&Math.abs(o)>30&&(n=o>0?3:1),-1!==n&&this.setState({board:this.state.board.move(n)})}}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown.bind(this))}},{key:"render",value:function(){var t=this.state.board.cells.map((function(t,e){return Object(m.jsx)("div",{children:t.map((function(t,o){return Object(m.jsx)(w,{},e*g.size+o)}))},e)})),e=this.state.board.tiles.filter((function(t){return 0!==t.value})).map((function(t){return Object(m.jsx)(O,{tile:t},t.id)})),o=this.state.board.score;return Object(m.jsxs)(s.a.Fragment,{children:[Object(m.jsx)("div",{className:"scoreboard",children:Object(m.jsxs)("h2",{id:"score",children:["Score: ",o]})}),Object(m.jsxs)("div",{className:"board",onTouchStart:this.handleTouchStart.bind(this),onTouchEnd:this.handleTouchEnd.bind(this),tabIndex:"1",children:[t,e,Object(m.jsx)(y,{board:this.state.board,onRestart:this.restartGame.bind(this)})]})]})}}]),o}(s.a.Component),y=function(t){var e=t.board,o=t.onRestart,n="";if(e.hasLost()){var s=document.getElementById("high-score").innerHTML,r=parseInt(e.score);n=r<parseInt(s)?"Loser!":Object(m.jsx)("button",{className:"tryAgain",onClick:p(r),children:"Submit High Score!"})}return n?Object(m.jsxs)("div",{className:"overlay",children:[n,Object(m.jsx)("button",{className:"tryAgain",onClick:o,onTouchEnd:o,children:"Try again"})]}):null},g=function t(){this.tiles=[],this.cells=[];for(var e=0;e<t.size;++e)this.cells[e]=[this.addTile(),this.addTile(),this.addTile(),this.addTile()];this.addRandomTile(),this.setPositions(),this.won=!1,this.score=0};g.prototype.addScore=function(t){this.score+=t},g.prototype.moveLeft=function(){for(var t=!1,e=0;e<g.size;++e){for(var o=this.cells[e].filter((function(t){return 0!==t.value})),n=[],s=0;s<g.size;++s){var r=o.length?o.shift():this.addTile();if(o.length>0&&o[0].value===r.value){var i=r;r=this.addTile(r.value),i.mergedInto=r;var a=o.shift();a.mergedInto=r,r.value+=a.value,this.addScore(r.value)}n[s]=r,this.won|=r.value===1/0,t|=r.value!==this.cells[e][s].value}this.cells[e]=n}return t};var w=function(t){Object(c.a)(o,t);var e=Object(l.a)(o);function o(){return Object(a.a)(this,o),e.apply(this,arguments)}return Object(h.a)(o,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return Object(m.jsx)("span",{className:"cell",children:""})}}]),o}(s.a.Component),O=function(t){Object(c.a)(o,t);var e=Object(l.a)(o);function o(){return Object(a.a)(this,o),e.apply(this,arguments)}return Object(h.a)(o,[{key:"shouldComponentUpdate",value:function(t){return this.props.tile!==t.tile||!(!t.tile.hasMoved()&&!t.tile.isNew())}},{key:"render",value:function(){var t=this.props.tile,e=["tile"];e.push("tile"+this.props.tile.value),t.mergedInto||e.push("position_"+t.row+"_"+t.column),t.mergedInto&&e.push("merged"),t.isNew()&&e.push("new"),t.hasMoved()&&(e.push("row_from_"+t.fromRow()+"_to_"+t.toRow()),e.push("column_from_"+t.fromColumn()+"_to_"+t.toColumn()),e.push("isMoving"));var o=e.join(" ");return Object(m.jsx)("span",{className:o,children:t.value})}}]),o}(s.a.Component),k=function(t){for(var e=t.length,o=t[0].length,n=[],s=0;s<e;++s){n.push([]);for(var r=0;r<o;++r)n[s][r]=t[r][o-s-1]}return n},T=function t(e,o,n){this.value=e||0,this.row=o||-1,this.column=n||-1,this.oldRow=-1,this.oldColumn=-1,this.markForDeletion=!1,this.mergedInto=null,this.id=t.id++};T.id=0,T.prototype.moveTo=function(t,e){this.oldRow=this.row,this.oldColumn=this.column,this.row=t,this.column=e},T.prototype.isNew=function(){return-1===this.oldRow&&!this.mergedInto},T.prototype.hasMoved=function(){return-1!==this.fromRow()&&(this.fromRow()!==this.toRow()||this.fromColumn()!==this.toColumn())||this.mergedInto},T.prototype.fromRow=function(){return this.mergedInto?this.row:this.oldRow},T.prototype.fromColumn=function(){return this.mergedInto?this.column:this.oldColumn},T.prototype.toRow=function(){return this.mergedInto?this.mergedInto.row:this.row},T.prototype.toColumn=function(){return this.mergedInto?this.mergedInto.column:this.column},g.prototype.addTile=function(){var t=new T;return T.apply(t,arguments),this.tiles.push(t),t},g.size=4,g.prototype.setPositions=function(){this.cells.forEach((function(t,e){t.forEach((function(t,o){t.oldRow=t.row,t.oldColumn=t.column,t.row=e,t.column=o,t.markForDeletion=!1}))}))},g.fourProbability=.1,g.prototype.addRandomTile=function(){for(var t=[],e=0;e<g.size;++e)for(var o=0;o<g.size;++o)0===this.cells[e][o].value&&t.push({r:e,c:o});var n=t[~~(Math.random()*t.length)],s=Math.random()<g.fourProbability?4:2;this.cells[n.r][n.c]=this.addTile(s)},g.prototype.move=function(t){this.clearOldTiles();for(var e=0;e<t;++e)this.cells=k(this.cells);for(var o=this.moveLeft(),n=t;n<4;++n)this.cells=k(this.cells);return o&&this.addRandomTile(),this.setPositions(),this},g.prototype.clearOldTiles=function(){this.tiles=this.tiles.filter((function(t){return!1===t.markForDeletion})),this.tiles.forEach((function(t){t.markForDeletion=!0}))},g.prototype.hasWon=function(){return this.won},g.deltaX=[-1,0,1,0],g.deltaY=[0,-1,0,1],g.prototype.hasLost=function(){for(var t=!1,e=0;e<g.size;++e)for(var o=0;o<g.size;++o){t|=0===this.cells[e][o].value;for(var n=0;n<4;++n){var s=e+g.deltaX[n],r=o+g.deltaY[n];s<0||s>=g.size||r<0||r>=g.size||(t|=this.cells[e][o].value===this.cells[s][r].value)}}return!t},i.a.render(Object(m.jsxs)(s.a.StrictMode,{children:[Object(m.jsx)(b,{}),Object(m.jsx)(j,{})]}),document.getElementById("boardDiv"))}},[[44,1,2]]]);
//# sourceMappingURL=main.4cecd638.chunk.js.map