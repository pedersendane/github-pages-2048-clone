(this["webpackJsonp2048-clone"]=this["webpackJsonp2048-clone"]||[]).push([[0],{24:function(e,t,o){},25:function(e,t,o){},45:function(e,t,o){"use strict";o.r(t);var n=o(1),s=o.n(n),r=o(10),i=o.n(r),a=(o(24),o(25),o(3)),c=o(4),h=o(6),l=o(5),u=o(7),d=o(8),m=o.n(d),b=o(19),f=o(0);function v(e){return Object(f.jsx)(f.Fragment,{children:function(e){var t=e.highScore;return t.length>0?t.sort((function(e,t){return e.score<t.score?1:-1})).slice(0,20).map((function(e,t){return Object(f.jsx)("div",{className:"high-score",children:Object(f.jsxs)("h5",{className:"score",children:["High Score ",t+1,": ",Object(f.jsx)("span",{className:"userScore",children:e.score})," by ",Object(f.jsx)("span",{className:"userName ".concat(e.id),children:e.name})]})},e.id)})):Object(f.jsx)("p",{children:" No Highscore Found "})}(e)})}function p(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),o=t[0],s=t[1],r={method:"get",url:"https://highscore-api.herokuapp.com/scores"};Object(n.useEffect)((function(){i()}),[]);var i=function(){m()(r).then((function(e){console.log(e);var t=e.data;s(t)})).catch((function(e){return console.error(e)}))};return Object(f.jsx)(v,{highScore:o})}var j=function(e){Object(h.a)(o,e);var t=Object(l.a)(o);function o(e){var n;return Object(a.a)(this,o),(n=t.call(this,e)).state={value:"",score:n.props.score},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(c.a)(o,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this,o=this.state.score.toString(),n=document.getElementsByClassName("userName"),s=[],r=[];for(var i in n)if(n[i].innerHTML){s.push(n[i].innerHTML),console.log(s);var a=n[i].className;r.push(a.substring(9,a.length)),console.log(r)}if(""===this.state.value)alert("Please enter your name");else{var c,h={name:this.state.value,score:o},l=Object.keys(h).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(h[e]))})).join("&");if(console.log(l),s.includes(this.state.value))c={method:"put",headers:{"content-type":"application/x-www-form-urlencoded"},data:l,url:"https://highscore-api.herokuapp.com/scores/"+r[s.indexOf(this.state.value)]};else c={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:l,url:"https://highscore-api.herokuapp.com/scores"};m()(c).then((function(e){console.log(e),alert(t.state.value+" submitted a high-score of: "+t.state.score)})).catch((function(e){console.log(e),alert("Sorry, it looks like there was an error submitting your score.")}))}}},{key:"render",value:function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("label",{children:[" Enter your name to submit your high score:",Object(f.jsx)("input",{type:"text",value:this.state.value,onChange:this.handleChange})," "]}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{type:"button",className:"tryAgain",onClick:this.handleSubmit,children:" Submit "})]})}}]),o}(s.a.Component),y=function(e){Object(h.a)(o,e);var t=Object(l.a)(o);function o(e){var n;return Object(a.a)(this,o),(n=t.call(this,e)).state={board:new O},n}return Object(c.a)(o,[{key:"restartGame",value:function(){this.setState({board:new O}),window.location.reload(!1)}},{key:"handleKeyDown",value:function(e){if(!this.state.board.hasWon())if(e.keyCode>=37&&e.keyCode<=40){e.preventDefault();var t=e.keyCode-37;this.setState({board:this.state.board.move(t)})}else switch(!0){case 87===e.keyCode:t=1,this.setState({board:this.state.board.move(t)});break;case 65===e.keyCode:t=0,this.setState({board:this.state.board.move(t)});break;case 83===e.keyCode:t=3,this.setState({board:this.state.board.move(t)});break;case 68===e.keyCode:t=2,this.setState({board:this.state.board.move(t)})}}},{key:"handleTouchStart",value:function(e){this.state.board.hasWon()||1===e.touches.length&&(this.startX=e.touches[0].screenX,this.startY=e.touches[0].screenY,e.preventDefault())}},{key:"handleTouchEnd",value:function(e){if(!this.state.board.hasWon()&&1===e.changedTouches.length){var t=e.changedTouches[0].screenX-this.startX,o=e.changedTouches[0].screenY-this.startY,n=-1;Math.abs(t)>3*Math.abs(o)&&Math.abs(t)>30?n=t>0?2:0:Math.abs(o)>3*Math.abs(t)&&Math.abs(o)>30&&(n=o>0?3:1),-1!==n&&this.setState({board:this.state.board.move(n)})}}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown.bind(this))}},{key:"render",value:function(){var e=this.state.board.cells.map((function(e,t){return Object(f.jsx)("div",{children:e.map((function(e,o){return Object(f.jsx)(w,{},t*O.size+o)}))},t)})),t=this.state.board.tiles.filter((function(e){return 0!==e.value})).map((function(e){return Object(f.jsx)(k,{tile:e},e.id)})),o=this.state.board.score;return Object(f.jsxs)(s.a.Fragment,{children:[Object(f.jsx)("div",{className:"scoreboard",children:Object(f.jsxs)("h2",{id:"score",children:["Score: ",o]})}),Object(f.jsxs)("div",{className:"board",onTouchStart:this.handleTouchStart.bind(this),onTouchEnd:this.handleTouchEnd.bind(this),tabIndex:"1",children:[e,t,Object(f.jsx)(g,{board:this.state.board,onRestart:this.restartGame.bind(this)})]})]})}}]),o}(s.a.Component),g=function(e){var t=e.board,o=e.onRestart,n="";return t.hasLost()&&(n=Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(j,{score:t.score})})),n?Object(f.jsxs)("div",{className:"overlay",children:[n,Object(f.jsx)("button",{className:"tryAgain",onClick:o,onTouchEnd:o,children:"Try again"})]}):null},O=function e(){this.tiles=[],this.cells=[];for(var t=0;t<e.size;++t)this.cells[t]=[this.addTile(),this.addTile(),this.addTile(),this.addTile()];this.addRandomTile(),this.setPositions(),this.won=!1,this.score=0};O.prototype.addScore=function(e){this.score+=e},O.prototype.moveLeft=function(){for(var e=!1,t=0;t<O.size;++t){for(var o=this.cells[t].filter((function(e){return 0!==e.value})),n=[],s=0;s<O.size;++s){var r=o.length?o.shift():this.addTile();if(o.length>0&&o[0].value===r.value){var i=r;r=this.addTile(r.value),i.mergedInto=r;var a=o.shift();a.mergedInto=r,r.value+=a.value,this.addScore(r.value)}n[s]=r,this.won|=r.value===1/0,e|=r.value!==this.cells[t][s].value}this.cells[t]=n}return e};var w=function(e){Object(h.a)(o,e);var t=Object(l.a)(o);function o(){return Object(a.a)(this,o),t.apply(this,arguments)}return Object(c.a)(o,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return Object(f.jsx)("span",{className:"cell",children:""})}}]),o}(s.a.Component),k=function(e){Object(h.a)(o,e);var t=Object(l.a)(o);function o(){return Object(a.a)(this,o),t.apply(this,arguments)}return Object(c.a)(o,[{key:"shouldComponentUpdate",value:function(e){return this.props.tile!==e.tile||!(!e.tile.hasMoved()&&!e.tile.isNew())}},{key:"render",value:function(){var e=this.props.tile,t=["tile"];t.push("tile"+this.props.tile.value),e.mergedInto||t.push("position_"+e.row+"_"+e.column),e.mergedInto&&t.push("merged"),e.isNew()&&t.push("new"),e.hasMoved()&&(t.push("row_from_"+e.fromRow()+"_to_"+e.toRow()),t.push("column_from_"+e.fromColumn()+"_to_"+e.toColumn()),t.push("isMoving"));var o=t.join(" ");return Object(f.jsx)("span",{className:o,children:e.value})}}]),o}(s.a.Component),x=function(e){for(var t=e.length,o=e[0].length,n=[],s=0;s<t;++s){n.push([]);for(var r=0;r<o;++r)n[s][r]=e[r][o-s-1]}return n},C=function e(t,o,n){this.value=t||0,this.row=o||-1,this.column=n||-1,this.oldRow=-1,this.oldColumn=-1,this.markForDeletion=!1,this.mergedInto=null,this.id=e.id++};C.id=0,C.prototype.moveTo=function(e,t){this.oldRow=this.row,this.oldColumn=this.column,this.row=e,this.column=t},C.prototype.isNew=function(){return-1===this.oldRow&&!this.mergedInto},C.prototype.hasMoved=function(){return-1!==this.fromRow()&&(this.fromRow()!==this.toRow()||this.fromColumn()!==this.toColumn())||this.mergedInto},C.prototype.fromRow=function(){return this.mergedInto?this.row:this.oldRow},C.prototype.fromColumn=function(){return this.mergedInto?this.column:this.oldColumn},C.prototype.toRow=function(){return this.mergedInto?this.mergedInto.row:this.row},C.prototype.toColumn=function(){return this.mergedInto?this.mergedInto.column:this.column},O.prototype.addTile=function(){var e=new C;return C.apply(e,arguments),this.tiles.push(e),e},O.size=4,O.prototype.setPositions=function(){this.cells.forEach((function(e,t){e.forEach((function(e,o){e.oldRow=e.row,e.oldColumn=e.column,e.row=t,e.column=o,e.markForDeletion=!1}))}))},O.fourProbability=.1,O.prototype.addRandomTile=function(){for(var e=[],t=0;t<O.size;++t)for(var o=0;o<O.size;++o)0===this.cells[t][o].value&&e.push({r:t,c:o});var n=e[~~(Math.random()*e.length)],s=Math.random()<O.fourProbability?4:2;this.cells[n.r][n.c]=this.addTile(s)},O.prototype.move=function(e){this.clearOldTiles();for(var t=0;t<e;++t)this.cells=x(this.cells);for(var o=this.moveLeft(),n=e;n<4;++n)this.cells=x(this.cells);return o&&this.addRandomTile(),this.setPositions(),this},O.prototype.clearOldTiles=function(){this.tiles=this.tiles.filter((function(e){return!1===e.markForDeletion})),this.tiles.forEach((function(e){e.markForDeletion=!0}))},O.prototype.hasWon=function(){return this.won},O.deltaX=[-1,0,1,0],O.deltaY=[0,-1,0,1],O.prototype.hasLost=function(){for(var e=!1,t=0;t<O.size;++t)for(var o=0;o<O.size;++o){e|=0===this.cells[t][o].value;for(var n=0;n<4;++n){var s=t+O.deltaX[n],r=o+O.deltaY[n];s<0||s>=O.size||r<0||r>=O.size||(e|=this.cells[t][o].value===this.cells[s][r].value)}}return!e},i.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(p,{})}),document.getElementById("highscoreDiv")),i.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(y,{})}),document.getElementById("boardDiv"))}},[[45,1,2]]]);
//# sourceMappingURL=main.ed7d5ae2.chunk.js.map